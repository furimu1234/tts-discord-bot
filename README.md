# tts-discord-bot
読み上げアクティビティを内蔵した読み上げBOT

# このBOTの特徴

discordのチャットに送信したメッセージをVCで喋るBOT<br>
BOTスタイルとアクティビティスタイルの二つがあり、アクティビティスタイルでは個人毎の設定をすることができる。<br>
BOTスタイルでは個人毎の設定は適用できないが、誰かが呼べばそのVCにいるユーザすべてが使用できる

# BOT機能説明
# BOTスタイル
---

## スラッシュコマンド

### メニュー
`/メニュー`
```
読み上げBOT全体のメニュー。<br>
コマンドの全ての機能をボタン1つで出来ます。
```

### 読み上げ

`読み上げ開始`
```
入力した人がいるVCにBOTを呼ぶ。<br>
既に別のVCに参加してたら別のBOTを呼ぶ。<br>
計4台のBOTを用意する。<br>
全台そのサーバーで使用されてたらエラーメッセージを出す。
```

`読み上げ終了`
```
入力した人がいるVCからBOTを退出させる。
```

#### 辞書

`辞書追加 <個人/全体> <変換前単語> <変換後単語>`
```
単語辞書を追加し、作成ユーザのIDを登録する。
変換前の単語が読み上げメッセージに含まれていたら変換後単語に変える。
個人辞書もしくは全体辞書の作成ユーザIDがコマンド送信者のIDと同じ場合エラーメッセージを送信する。
個人が指定された場合辞書を追加したユーザのみに反映する。
全体が指定された場合全員に適用する辞書を追加する。
変換前単語に指定された単語が既にDBに登録されてた場合、エラーメッセージを送信する。
```
`辞書変更 <変換前単語> <変換後単語>`
```
単語辞書を変更する。
個人辞書に変換前単語が登録されてる場合は、そのまま登録する。
全体辞書に登録されてる場合は、作成ユーザのIDとコマンド実行者IDが同じ場合登録する。

全体辞書で作成ユーザのIDとコマンド実行者IDが違う場合、もしくは個人辞書に変換前単語が登録されてない場合エラーメッセージを送信する。
```

`辞書削除 <変換前単語>`
```
単語辞書を削除する。
個人辞書に変換前単語が登録されてる場合は、確認メッセージ送信後削除する。
全体辞書に登録されてる場合は、作成ユーザのIDとコマンド実行者IDが同じ場合削除する。
全体辞書で作成ユーザのIDとコマンド実行者IDが違う場合、もしくは個人辞書に変換前単語が登録されてない場合エラーメッセージを送信する。
```

##### 読み上げ音声設定
`/読み上げ設定`

- 話者: [話者](#話者一覧)の中から選択します
- 感情(イントネーション): [感情](#感情一覧)の中から選択します(話者によって選択肢が変わります。)
- 速度: 
  - ボイスロイド
    - 0.5 ~ 2.0
  - Voice Text Web Api
    - 50 ~ 400
- ピッチ:
  - ボイスロイド
    - -5.0 ~ +5.0
  - Voice Text Web Api
    - 50 ~ 200

#### BOT設定
`読み上げBOT設定`
- 自動入室設定: 
BOTがVCに自動で入ります。書き込み時をONにすると対応するTCに書き込んだ時のみVCに入り、オフにするとVCに誰かが参加したタイミングでBOTが入ります。<br>
聞き専のみをonにすると書き込み時がonの場合のみ、ミュートの人がTCに書き込んだタイミングでVCに入ります。offにするとミュートではない人を含めて誰かがTCに書き込んだタイミングでVCに入ります。
  - 聞き専のみ[on/off]
  - 書き込み時[on/off]

# アクティビティスタイル(後で書く)

# デフォルト辞書
| 変換前単語                        | 変換後単語     |
|----------------------------------|----------------|
| http(s)\://www.domain.tld        |    URL         |
| 連続したw                        | 草             |
| <#チャンネルID>                  | チャンネル名   |
| <@&ロールID>                     | ロール名       |
| <@ユーザID>                      | ユーザ名       |
| <:カスタム絵文字名:絵文字ID>     | カスタム絵文字名 |

# 話者一覧
## 標準音声
- 男性1
- 男性2
- 女性1
- 女性2
- サンタ
- 熊
## ボイスロイド
- 四国めたん
- ずんだもん
- 春日部つむぎ
- 雨晴はう
- 波音リツ
- 玄野武宏
- 白上虎太郎
- 青山龍星
- 冥鳴ひまり
- 九州そら
- もち子さん
- 剣崎雌雄
- WhiteCUL
- 後鬼
- No.7
- ちび式じい
- 櫻歌ミコ
- 小夜/SAYO
-  ナースロボ＿タイプＴ
-  †聖騎士 紅桜†
-  雀松朱司
-  麒ヶ島宗麟
-  春歌ナナ
-  猫使アル
-  猫使ビィ
-  中国うさぎ
-  栗田まろん
-  あいえるたん
-  満別花丸
-  琴詠ニア
-  Voidoll
-  ぞん子
-  中部つるぎ

# 感情一覧
話者により選択できない物もあります
- 喜び(標準音声のみ)
- 怒り(標準音声のみ)
- 悲しみ(標準音声のみ)
-  ノーマル
-  あまあま
-  ツンツン
-  セクシー
-  ささやき
-  ヒソヒソ
-  ヘロヘロ
-  なみだめ
-  クイーン
-  喜び
-  ツンギレ
-  悲しみ
-  ふつう
-  わーい
-  びくびく
-  おこ
-  びえーん
-  熱血
-  不機嫌
-  しっとり
-  かなしみ
-  囁き
-  セクシー／あん子
-  泣き
-  怒り
-  のんびり
-  たのしい
-  かなしい
-  人間ver.
-  ぬいぐるみver.
-  人間（怒り）ver.
-  鬼ver.
-  アナウンス
-  読み聞かせ
-  第二形態
-  ロリ
-  楽々
-  恐怖
-  内緒話
-  おちつき
-  うきうき
-  人見知り
-  おどろき
-  こわがり
-  へろへろ
-  元気
-  ぶりっ子
-  ボーイ
-  低血圧
-  覚醒
-  実況風
-  おどおど
-  絶望と敗北

# 使用技術

## 🧩 共通

| ライブラリ     | バージョン    |
|----------------|---------------|
| drizzle-orm    | v0.43.1       |
| zod            | v3.25.67      |

---

## 🤖 BOT

| ライブラリ     | バージョン    |
|----------------|---------------|
| discord.js     | v14.19.2      |


## クレジット

本プロジェクトでは、以下の音声合成エンジンを使用しています：

- [VOICEVOX](https://voicevox.hiroshiba.jp/)  
  無料で使える中品質なテキスト読み上げソフトウェア

VOICEVOX:四国めたん 他 キャラクター音声を利用しています。


---

# TODOリスト
- [x] Docker 環境を整備する
- [x] README に使い方を追記する
- [x] 話者感情管理マスタのスキーマを作成する
- [ ] style毎にIDが振られてるのでそのIDをDBのキーとする。<br>voice boxのIDを全て登録した後で標準音声の話者と感情をそれぞれ紐づけてIDを連番で振る
